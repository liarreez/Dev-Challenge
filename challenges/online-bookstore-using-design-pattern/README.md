# 🎯 Java Design Pattern Challenge

온라인 서점 시스템을 구현하면서 다양한 디자인 패턴을 적용해보는 프로젝트입니다.

## 🚀 프로젝트 개요

- 프로젝트 기간: 7일
- 개발 언어: Java
- 프레임워크: 사용하지 않음
- 결과물 제출: GitHub PR

## 📋 프로젝트 목표

- 디자인 패턴을 실제 비즈니스 로직에 적용해보기
- 각 디자인 패턴 적용 전/후의 차이점 이해하기
- 패턴의 필요성과 trade-off를 경험하기

## 🎯 과제 진행 방법

1. 매일 제시되는 요구사항을 구현합니다.
2. 구현 시에는 반드시 먼저 디자인 패턴을 적용하지 않고 구현합니다.
3. 이후 지정된 디자인 패턴을 적용하여 리팩토링합니다.
4. 각 패턴 적용 전/후의 차이점을 docs/README.md에 작성합니다.

## 📝 과제 제출 방법

1. 저장소를 fork하여 자신의 저장소를 만듭니다.
2. 매일의 과제는 새로운 브랜치를 생성하여 진행합니다.
3. Commit은 세부 작업마다 Commit Convention을 지키며 진행해 주세요
4. 과제 완료 후 PR을 생성합니다.
5. PR에는 다음 내용이 포함되어야 합니다:
   - 구현한 기능 목록
   - 디자인 패턴 적용 전/후 코드 비교
   - 적용한 패턴의 장단점 분석

#### 메인 화면 예시
```
=== 온라인 서점 시스템 ===
1. 사용자 관리
2. 도서 관리
4. 주문
5. 리뷰
6. 외부 API
0. 프로그램 종료

선택>
```

### Feature 1: 사용자 관리
#### 요구사항
- 회원가입 기능
  * 사용자는 이름, 이메일, 비밀번호, 전화번호, 주소를 입력하여 회원가입할 수 있다.
  * 입력한 정보는 저장되어야 하며, 중복된 이메일은 허용하지 않는다.
  * 비밀번호와 비밀번호 확인이 일치하지 않으면 회원가입이 실패한다.
  * 필수 입력 사항이 모두 입력되지 않으면 에러 메시지를 출력한다.
  * 회원가입 성공 시 사용자 정보를 출력하여 확인 후 저장한다.

- 로그인 기능
  * 사용자는 이메일과 비밀번호로 로그인할 수 있다.
  * 존재하지 않는 이메일을 입력하면 로그인에 실패한다.
  * 비밀번호가 틀리면 로그인에 실패한다.
  * 로그인 성공 시 환영 메시지를 출력한다.

#### 참고 디자인 패턴
- Singleton : 사용자 데이터 관리 클래스
- Factory : 사용자 객체 생성
- Decorator : 암호화 처리
- Chain of Responsibility : 입력 데이터 검증
- Builder : 사용자 객체 생성
- State : 사용자 상태 관리

#### 실행 결과 예시
```
=== 사용자 관리 시스템 ===
1. 회원가입
2. 로그인
0. 메인 화면
선택> 1

[회원가입]
이메일: hong@example.com
비밀번호: ****
비밀번호 확인: ****
이름: 홍길동
전화번호: 010-1234-5678
주소: 서울시 강남구 역삼동 123-456

[입력 정보 확인]
이메일: hong@example.com
이름: 홍길동
전화번호: 010-1234-5678
주소: 서울시 강남구 역삼동 123-456

입력하신 정보로 가입하시겠습니까? (Y/N)> Y

회원가입이 완료되었습니다!

선택> 2

[로그인]
이메일: hong@example.com
비밀번호: ****

로그인 성공!
홍길동님 환영합니다.

선택> 2

[로그인]
이메일: unknown@example.com
비밀번호: ****

로그인 실패! 이메일이 존재하지 않습니다.

선택> 2

[로그인]
이메일: hong@example.com
비밀번호: wrongpassword

로그인 실패! 비밀번호가 틀렸습니다.
```

### Feature 2: 도서 관리 시스템
#### 요구사항
- 접근 제어
  * 사전에 등록한 관리자만 도서 관리 시스템에 접근 가능.

- 도서 정보: 제목, 저자, 가격, ISBN, 등록일.
- CRUD 기능 구현:
  * 등록: 새로운 도서를 시스템에 추가.
  * 수정: 기존 도서 정보를 수정.
  * 삭제: 기존 도서 정보를 삭제.  
  * 조회: 저장된 도서 리스트를 출력.

-검색 기능
  * 도서 제목 또는 저자 기준으로 검색.
  * 검색 결과는 목록으로 출력되며, 선택적으로 도서 상세보기, 수정, 삭제 가능.

- 에러 처리
  * 필수 입력값 누락 시 에러 메시지 출력.
  * 도서 수정 시 빈 입력 필드는 기존 값 유지.
  * 도서 삭제 시 확인 절차를 거침.

#### 적용할 디자인 패턴
- Singleton: 도서 저장소 구현
- Factory Method: 도서 객체 생성 관리
- Builder: 도서 객체 생성
- Proxy : 관리자 인증
- Decorator : 도서 정보 출력 형식

#### 실행 결과 예시
```
=== 도서 관리 시스템 ===
1. 도서 등록
2. 도서 검색(관리)
0. 메인 화면
선택> 1

[도서 등록]
제목: Clean Code
저자: Robert C. Martin
가격: 35000
ISBN: 9788966260959

도서가 성공적으로 등록되었습니다.

[등록된 도서 정보]
제목: Clean Code
저자: Robert C. Martin
가격: 35,000원
ISBN: 9788966260959
등록일: 2024-12-21

선택> 2

[도서 검색]
검색어: Clean
1. Clean Code (Robert C. Martin) - 35,000원
2. Clean Architecture (Robert C. Martin) - 32,000원
0. 이전으로
총 2건이 검색되었습니다.

선택> 1

[Clean Code (Robert C. Martin) - 35,000원]
1. 도서 수정
2. 도서 삭제
0. 이전으로

선택> 1

[도서 수정]
현재 정보:
제목: Clean Code
저자: Robert C. Martin
가격: 35,000원
ISBN: 9788966260959

수정할 정보를 입력하세요.
제목 (현재: Clean Code): Clean Code (2nd Edition)
저자 (현재: Robert C. Martin): Robert C. Martin
가격 (현재: 35,000): 40,000
ISBN (현재: 9788966260959): 9780134661742

도서 정보가 성공적으로 수정되었습니다.

[수정된 도서 정보]
제목: Clean Code (2nd Edition)
저자: Robert C. Martin
가격: 40,000원
ISBN: 9780134661742
등록일: 2024-12-21

선택> 2

[도서 삭제]
[Clean Code (2nd Edition)] 도서를 삭제하시겠습니까? (Y/N): Y

도서가 성공적으로 삭제되었습니다.
```

### Feature 3: 주문 시스템
#### 요구사항
- 장바구니 기능
  * 사용자가 선택한 도서를 장바구니에 추가할 수 있다.
  * 장바구니에 담긴 도서를 수정(수량 변경)하거나 삭제할 수 있다.
  * 장바구니는 세션 단위로 관리되며, 로그인한 사용자에 한해 접근 가능하다.

- 주문 처리 시스템
  * 사용자는 장바구니의 품목을 결제하여 주문을 완료할 수 있다.
  * 다양한 결제 방식을 지원(신용카드, 계좌이체, 포인트 결제).
  * 결제 방식에 따른 할인 적용:
    - 신용카드: 총액의 5% 할인.
    - 계좌이체: 총액의 3% 할인.
    - 포인트 결제: 할인이 적용되지 않음.
  * 주문 완료 시 주문번호, 결제 금액, 배송지, 주문일시 등을 출력.

- 도서 검색
  * 사용자는 도서 제목 또는 저자 기준으로 도서를 검색할 수 있다.
  * 검색 결과에서 도서를 장바구니에 추가 가능.

- 접근 제어
  * 장바구니 및 주문은 반드시 로그인 후 이용 가능.

- 에러 처리
  * 장바구니가 비어 있으면 결제를 진행할 수 없다.
  * 입력된 수량이 0 이하일 경우 에러 메시지 출력.

#### 적용할 디자인 패턴
- Observer: 주문 상태 변경 기록
- Strategy: 다양한 결제 방식 구현
- State: 주문 상태 관리
- Singleton : 장바구니와 주문 관리 객체
- Builder : 주문 객체 생성

#### 실행 결과 예시
```
=== 주문 시스템 ===

1. 도서 검색
2. 장바구니
0. 메인화면
선택> 1

[도서 검색]
검색어: Clean
1. Clean Code (Robert C. Martin) - 35,000원
2. Clean Architecture (Robert C. Martin) - 32,000원
0. 이전으로
총 2건이 검색되었습니다.

선택> 1

[Clean Code (Robert C. Martin) - 35,000원]
1. 장바구니 담기
0. 이전으로
선택> 1

갯수> 2
[Clean Code (Robert C. Martin) - 35,000원] 2권이 장바구니에 담겼습니다!

선택> 2

[장바구니]
1. Clean Code - 35,000원 (2권)
2. Effective Java - 45,000원 (1권)
총액: 115,000원

1. 도서 제거
2. 수량 변경
3. 결제
0. 이전으로

선택> 2
장바구니 번호> 1
갯수> 1
[Clean Code (Robert C. Martin) - 35,000원] 수량이 1권으로 변경되었습니다!

[장바구니]
1. Clean Code - 35,000원 (1권)
2. Effective Java - 45,000원 (1권)
총액: 80,000원

선택> 1
장바구니 번호> 2
[Effective Java - 45,000원] 1권이 장바구니에서 제거되었습니다!

[장바구니]
1. Clean Code - 35,000원 (1권)
총액: 35,000원

선택> 3
[결제 수단 선택]
1. 신용카드 (5% 할인)
2. 계좌이체 (현금할인 3%)
3. 포인트 결제
0. 이전으로
선택> 1

[주문 처리 중...]
신용카드 결제가 진행됩니다.
할인 적용: -1,750원
최종 결제 금액: 33,250원

[주문 완료]
주문번호: ORDER-20241221-002
주문일시: 2024-12-21 15:45:10
배송지: 서울시 강남구 역삼동 123-456
```

### Feature 4: 리뷰 시스템
#### 요구사항
- 도서 리뷰 작성
  * 구매자가 구매한 도서에 한해 리뷰를 작성할 수 있다.
  * 리뷰는 1-5점 사이의 별점을 포함해야 한다.
  * 리뷰 내용은 최소 10자 이상 입력해야 한다.

- 리뷰 조회
  * 특정 도서의 리뷰를 조회할 수 있다.
  * 별점 평균 및 리뷰 개수를 표시.

- 리뷰 수정 및 삭제
  * 구매자는 본인이 작성한 리뷰를 수정하거나 삭제할 수 있다.
  * 리뷰 수정 시 이전 내용을 히스토리에 저장.

- 답글 기능
  * 리뷰에는 최대 1단계의 답글을 달 수 있다.
  * 답글 작성자는 작성자의 닉네임이 표시된다.

- 캐싱 기능
  * 자주 조회되는 리뷰 데이터를 캐싱하여 성능 최적화.

- 제한 조건
  * 별점은 1-5점 사이만 입력 가능.
  * 비로그인 상태에서 리뷰 작성, 수정, 삭제 불가.

#### 적용할 디자인 패턴
- Composite: 리뷰 답글 기능 구현
- Proxy: 리뷰 캐싱 구현
- Command: 리뷰 수정 히스토리 관리
- Singleton : 리뷰 관리 객체 구현

#### 실행 결과 예시
```
=== 도서 리뷰 시스템 ===

[도서 검색]
검색어: Clean
1. Clean Code (Robert C. Martin) - 35,000원
2. Clean Architecture (Robert C. Martin) - 32,000원
0. 이전으로
총 2건이 검색되었습니다.
선택> 1

[Clean Code - 리뷰]
★★★★☆ 4.2/5 (총 5개 리뷰)

1. ★★★★★ (user1) 
   내용: 최고의 개발 서적입니다.
   작성일: 2024-12-20
2. ★★★★☆ (user2) 
   내용: 매우 유익했으나 조금 어렵습니다.
   작성일: 2024-12-21

1. 리뷰 작성
2. 리뷰 수정
3. 리뷰 삭제
4. 답글 작성
0. 이전으로
선택> 1

[리뷰 작성]
별점 (1-5): 5
내용: 실제 프로젝트에서 많은 도움이 되었습니다.

리뷰가 성공적으로 작성되었습니다.

[Clean Code - 리뷰]
★★★★☆ 4.3/5 (총 6개 리뷰)

1. ★★★★★ (user1) 
   내용: 최고의 개발 서적입니다.
   작성일: 2024-12-20
2. ★★★★☆ (user2) 
   내용: 매우 유익했으나 조금 어렵습니다.
   작성일: 2024-12-21
3. ★★★★★ (you) 
   내용: 실제 프로젝트에서 많은 도움이 되었습니다.
   작성일: 2024-12-21

선택> 2
리뷰 번호: 3

[리뷰 수정]
현재 내용: 실제 프로젝트에서 많은 도움이 되었습니다.
새로운 내용: 매우 실용적인 서적입니다.

리뷰가 성공적으로 수정되었습니다.

[리뷰 히스토리]
1. "실제 프로젝트에서 많은 도움이 되었습니다." (2024-12-21 10:45)
2. "매우 실용적인 서적입니다." (2024-12-21 11:00)

[Clean Code - 리뷰]
★★★★☆ 4.3/5 (총 6개 리뷰)

1. ★★★★★ (user1) 
   내용: 최고의 개발 서적입니다.
   작성일: 2024-12-20
2. ★★★★☆ (user2) 
   내용: 매우 유익했으나 조금 어렵습니다.
   작성일: 2024-12-21
3. ★★★★★ (you) 
   내용: 매우 실용적인 서적입니다.
   작성일: 2024-12-21

선택> 4
리뷰 번호: 1
답글 내용: 책 추천 감사합니다.

답글이 성공적으로 작성되었습니다.

[Clean Code - 리뷰]
★★★★☆ 4.3/5 (총 6개 리뷰)

1. ★★★★★ (user1) 
   내용: 최고의 개발 서적입니다.
   작성일: 2024-12-20
       └── ★★★★★ (you)
           내용: 책 추천 감사합니다.
           작성일: 2024-12-21

선택> 3
리뷰 번호: 3
리뷰를 삭제하시겠습니까? (Y/N): Y

리뷰가 성공적으로 삭제되었습니다.
```

### Feature 5: 외부 시스템 연동
#### 요구사항
- 외부 도서 API 연동
  * Google Books API, 알라딘 API를 통해 도서를 검색하고, 관련 정보를 가져온다.
  * 검색 결과에서 도서 제목, 저자, ISBN, 출판사 정보를 표시한다.
  * API 요청 실패 시 재시도 로직 구현 및 실패 로그 기록.
  * 모든 외부 요청은 timeout 설정으로 제한.

#### 적용할 디자인 패턴
- Adapter: 외부 API 연동
- Bridge: 다양한 도서 API 연동 확장 가능성 고려
- Singleton : 외부 API 클라이언트

#### 실행 결과 예시
```
=== 외부 도서 API 연동 ===

1. Google Books 도서 검색
2. Aladin 도서 검색
0. 메인 화면
선택> 1

[Google Books API 연동]
검색어: Clean Code
- API 요청 중...
- 검색 결과를 가져오는 중...
- 3건 검색됨

1. Clean Code (Robert C. Martin)
   ISBN: 9780132350884
   출판사: Pearson Education
2. The Clean Coder (Robert C. Martin)
   ISBN: 9780137081073
   출판사: Prentice Hall
3. Clean Architecture (Robert C. Martin)
   ISBN: 9780134494272
   출판사: Pearson Education

선택> 0
메인 화면으로 돌아갑니다.

선택> 1
[Google Books API 연동]
검색어: InvalidSearchTerm
- API 요청 중...
- 검색 실패: 네트워크 문제 또는 API 제한 초과.
- 요청 재시도 (1/3)...
- 요청 재시도 (2/3)...
- 요청 재시도 (3/3)...
- API 호출 실패. 로그 파일을 확인하세요.
```

## ⚠️ 제약사항

- 외부 라이브러리 사용 금지
- 파일이나 DB 사용하지 않고 메모리에서 데이터 관리
